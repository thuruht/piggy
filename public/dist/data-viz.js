tete;function S(t){t.chartData={timeline:[],types:{ice:0,pig:0},hourly:new Array(24).fill(0),daily:new Array(7).fill(0)},t.updateStats=g,t.animateStats=u,t.updateCharts=y,t.processChartData=m,t.renderTimelineChart=f,t.renderTypeChart=D,t.renderHeatmap=x,t.toggleSidebar=w,t.closeSidebar=b,t.animateEntrance=v}function g(){let t=new Date().toDateString();this.stats={total:this.markers.length,ice:this.markers.filter(e=>e.type==="ICE").length,pig:this.markers.filter(e=>e.type==="PIG").length,today:this.markers.filter(e=>new Date(e.timestamp).toDateString()===t).length},this.animateStats()}function u(){Object.keys(this.stats).forEach(t=>{let e=document.querySelector(`#stat-${t} .stat-number`);e&&gsap.to({value:0},{value:this.stats[t],duration:1.5,ease:"power2.out",onUpdate:function(){e.textContent=Math.round(this.targets()[0].value)}})})}function y(){this.processChartData(),this.renderTimelineChart(),this.renderTypeChart(),this.renderHeatmap()}function m(){this.chartData.timeline=[],this.chartData.types={ice:0,pig:0},this.chartData.hourly.fill(0),this.chartData.daily.fill(0);let t={};this.markers.forEach(e=>{let s=new Date(e.timestamp),a=s.toDateString(),d=s.getHours(),l=s.getDay();t[a]||(t[a]={date:a,ice:0,pig:0}),t[a][e.type.toLowerCase()]++,this.chartData.types[e.type.toLowerCase()]++,this.chartData.hourly[d]++,this.chartData.daily[l]++}),this.chartData.timeline=Object.values(t).sort((e,s)=>new Date(e.date)-new Date(s.date)).slice(-30)}function f(){let t=d3.select("#timeline-chart");if(t.selectAll("*").remove(),this.chartData.timeline.length===0)return;let e={top:20,right:30,bottom:40,left:40},s=360-e.left-e.right,a=200-e.top-e.bottom,l=t.append("svg").attr("width",s+e.left+e.right).attr("height",a+e.top+e.bottom).append("g").attr("transform",`translate(${e.left},${e.top})`);t.insert("h4","svg").text("Reports Over Time (Last 30 Days)").style("margin","0 0 15px 0").style("color","#2c3e50");let h=d3.scaleBand().domain(this.chartData.timeline.map(n=>n.date)).range([0,s]).padding(.1),c=d3.scaleLinear().domain([0,d3.max(this.chartData.timeline,n=>n.ice+n.pig)]).range([a,0]),i=d3.stack().keys(["ice","pig"])(this.chartData.timeline),r={ice:"#ff4444",pig:"#4444ff"};l.selectAll(".layer").data(i).enter().append("g").attr("class","layer").attr("fill",n=>r[n.key]).selectAll("rect").data(n=>n).enter().append("rect").attr("x",n=>h(n.data.date)).attr("y",a).attr("height",0).attr("width",h.bandwidth()).transition().duration(800).delay((n,p)=>p*50).attr("y",n=>c(n[1])).attr("height",n=>c(n[0])-c(n[1])),l.append("g").attr("transform",`translate(0,${a})`).call(d3.axisBottom(h).tickFormat("")),l.append("g").call(d3.axisLeft(c).ticks(5))}function D(){let t=d3.select("#type-chart");t.selectAll("*").remove();let e=[{type:"ICE",count:this.chartData.types.ice,color:"#ff4444"},{type:"PIG",count:this.chartData.types.pig,color:"#4444ff"}];if(e.every(r=>r.count===0))return;t.append("h4").text("Report Types Distribution").style("margin","0 0 15px 0").style("color","#2c3e50");let s=360,a=200,d=Math.min(s,a)/2-20,h=t.append("svg").attr("width",s).attr("height",a).append("g").attr("transform",`translate(${s/2},${a/2})`),c=d3.pie().value(r=>r.count).sort(null),o=d3.arc().innerRadius(d*.4).outerRadius(d),i=h.selectAll(".arc").data(c(e)).enter().append("g").attr("class","arc");i.append("path").attr("fill",r=>r.data.color).attr("stroke","white").attr("stroke-width",2).transition().duration(800).attrTween("d",function(r){let n=d3.interpolate({startAngle:0,endAngle:0},r);return function(p){return o(n(p))}}),i.append("text").attr("transform",r=>`translate(${o.centroid(r)})`).attr("text-anchor","middle").attr("font-size","14px").attr("font-weight","bold").attr("fill","white").text(r=>r.data.count>0?r.data.count:"").style("opacity",0).transition().delay(800).duration(300).style("opacity",1)}function x(){let t=d3.select("#heatmap-chart");t.selectAll("*").remove(),t.append("h4").text("Activity by Hour of Day").style("margin","0 0 15px 0").style("color","#2c3e50");let e=360,s=60,a=e/24,d=t.append("svg").attr("width",e).attr("height",s+40),l=d3.max(this.chartData.hourly),h=d3.scaleSequential(d3.interpolateBlues).domain([0,l||1]),c=d.selectAll(".hour-cell").data(this.chartData.hourly).enter().append("g").attr("class","hour-cell");c.append("rect").attr("x",(o,i)=>i*a).attr("y",20).attr("width",a-1).attr("height",s-20).attr("fill","#f0f0f0").transition().duration(600).delay((o,i)=>i*25).attr("fill",o=>h(o)),c.append("text").attr("x",(o,i)=>i*a+a/2).attr("y",15).attr("text-anchor","middle").attr("font-size","10px").attr("fill","#666").text((o,i)=>i%4===0?i:""),c.append("title").text((o,i)=>`${i}:00 - ${o} reports`)}function w(){let t=document.getElementById("sidebar");t.classList.contains("open")?this.closeSidebar():(t.style.display="block",t.classList.add("open"),gsap.from("#chart-container > *",{x:50,opacity:0,duration:.5,stagger:.1,delay:.2}),this.updateCharts())}function b(){let t=document.getElementById("sidebar");t.classList.remove("open"),setTimeout(()=>{t.classList.contains("open")||(t.style.display="none")},400)}function v(){gsap.from("#header",{y:-100,opacity:0,duration:.8,ease:"power2.out"}),gsap.from(".stat-item",{y:50,opacity:0,duration:.6,stagger:.1,delay:.3,ease:"back.out(1.7)"}),gsap.from("#map-container",{scale:.9,opacity:0,duration:1,delay:.5,ease:"power2.out"}),gsap.from(".legend",{x:100,opacity:0,duration:.6,delay:.8})}export{S as setupDataViz};
//# sourceMappingURL=data-viz.js.map
